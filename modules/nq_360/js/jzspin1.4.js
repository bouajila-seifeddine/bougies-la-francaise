$.fn.jzSpin=function(g){function v(){}function w(){clearInterval(e.autorotateInterval);clearInterval(e.autorotateTimeout)}function x(){0==a.mode&&!1==a.inertiaactive&&(e.autorotateTimeout=window.setTimeout(function(){e.autorotateInterval=window.setInterval(a.rotatej,a.rotationspeed)},a.autorotateAfter));$(a.zzid).unbind("mousemove",i.mouseMove_After_Mouse_Down_Handler)}function y(b){if(1==b.which){b.preventDefault();a.disableevents();var c=$("#scancube_jzspin").offset();i.mouseDownX=b.pageX-c.left;
i.mouseDownY=b.pageY-c.top;$(a.zzid).unbind("mousemove",i.mouseMove_After_Mouse_Down_Handler);$(a.zzid).bind("mousemove",i.mouseMove_After_Mouse_Down_Handler);return!1}}function z(b){$(a.zzid).unbind("mousemove",i.mouseMove_After_Mouse_Down_Handler);var c=$("#scancube_jzspin").offset(),d=b.pageX-c.left,c=b.pageY-c.top;if((!0==a.isZoomable||1==a.isZoomable)&&i.mouseDownX==d&&i.mouseDownY==c)d=$("#scancube_jzspin").offset(),i.mouseDownX=b.pageX-d.left,i.mouseDownY=b.pageY-d.top,0==a.mode?(a.disableevents(),
i.zoom_in(),a.switchmode(1)):(a.hide_Magnifier(),a.switchmode(0))}function A(a){a.preventDefault();return!1}function q(){r>a.numberOfImages-2?(window.clearTimeout(s),B()):s=setTimeout(function(){q()},100)}function B(){m.parentNode.removeChild(m);$(a.zzid).css("width",a.ldImageWidth.toString());$(a.zzid).css("height",(a.ldImageHeight*a.numberOfImages).toString());$(a.zzid).css("left","0px");for(l=0;l<a.numberOfImages;l++){var b=a.tofourdigits(l),b="<img width="+a.ldImageWidth+" height="+a.ldImageHeight+
" src='"+a.ldImageBaseName+b+".jpg'/>";$(a.zzid).append(b);$(b).css("position","absolute");$(b).css("display","block");$(b).css("left","0px");$(b).css("top",l*a.ldImageHeight+"px")}var b=a,c=document.createElement("div");$(c).css("width",a.magnifierSize+"px");$(c).css("height",a.magnifierSize+"px");b.magnifier=c;$("#scancube_jzspin").append(a.magnifier);a.hide_Magnifier();$(a.magnifier).bind("click",i.controlButtonClick);$(a.magnifier).bind("mousemove",i.magnifier_MouseMove);$(a.magnifier).bind("mouseleave",
C); a.magnifier.ontouchstart = n.magnifierTouchStart; a.magnifier.ontouchend = n.magnifierTouchEnd; a.magnifier.ontouchmove = n.magnifierTouchMove; a.magnifier.ongesturechange = n.gesturechange; e.autorotateInterval = window.setInterval(a.rotatej, a.rotationspeed); if (/*window.Touch||*/window.ontouchstart!==undefined) {if (b = document.getElementById(t), b.ontouchstart = n.touchStartHandler, b.ontouchmove = n.touchMoveHandler, b.ontouchend = n.touchEndHandler, b.onclick = n.clickHandler, !0 == a.isZoomable || 1 == a.isZoomable) a.controlButtons.ontouchstart =
n.touchStartControlButtons}else if($(a.zzid).bind("mousedown",y),$(a.zzid).bind("mouseup",z),$(a.zzid).bind("dblclick",v),$(a.zzid).bind("drag",A),$(a.zzid).bind("mouseenter",w),$(a.zzid).bind("mouseleave",x),!0==a.isZoomable||1==a.isZoomable)a.controlButtons.onclick=i.controlButtonClick}function C(){a.hide_Magnifier();a.switchmode(0)}var h=$.extend({style:1,ldImageWidth:400,ldImageHeight:400,isZoomable:!1,hdImageWidth:1200,hdImageHeight:1200,rotationSpeed:10,autoSpinAfter:3E3,numberOfImages:36,direction:0,
magnifierSize:300,ldImageBaseName:"sc_",hdImageBaseName:"sc-zoom"},g),a={};window.scanTimes||(scanTimes=[]);var g=this.attr("id"),e=scanTimes[g];e&&(window.clearInterval(e.autorotateInterval),window.clearTimeout(e.timeoutInterval),window.clearTimeout(e.inertiaTimeout),window.clearTimeout(e.autorotateTimeout));scanTimes[g]={autorotateInterval:0,timeoutInterval:0,inertiaTimeout:0,autorotateTimeout:0};e=scanTimes[g];e.autorotateInterval=0;e.timeoutInterval=0;e.inertiaTimeout=0;e.autorotateTimeout=0;
a.disableevents=function(){window.clearInterval(e.autorotateInterval);window.clearTimeout(e.timeoutInterval);window.clearTimeout(e.inertiaTimeout);window.clearTimeout(e.autorotateTimeout);a.inertiaactive=false};a.mode=0;a.controlButtonsHeight=32;a.tofourdigits=function(a){var c="";a<10?c="000"+a:a<100?c="00"+a:a<1E3&&(c="0"+a);return c};a.startinertia=function(b){a.inertiaspeed=1;a.disableevents();b<0?a.inertiafunc_Unclockwise():a.inertiafunc_Clockwise()};a.inertiafunc_Unclockwise=function(){a.inertiaspeed=
a.inertiaspeed+1;a.inertiaactive=true;if(a.inertiaspeed>100)a.inertiaactive=false;else{a.zrotate_Unclockwise();e.inertiaTimeout=window.setTimeout(function(){a.inertiafunc_Unclockwise()},a.inertiaspeed)}};a.inertiafunc_Clockwise=function(){a.inertiaspeed=a.inertiaspeed+1;a.inertiaactive=true;if(a.inertiaspeed>100)a.inertiaactive=false;else{a.zrotate_Clockwise();e.inertiaTimeout=window.setTimeout(function(){a.inertiafunc_Clockwise()},a.inertiaspeed)}};a.zrotate_Clockwise=function(){a.current++;if(a.current<
-(a.numberOfImages-1))a.current=0;if(a.current>0)a.current=-(a.numberOfImages-1);$(a.zzid).css("top",a.current*a.ldImageHeight+"px")};a.zrotate_Unclockwise=function(){a.current--;if(a.current<-(a.numberOfImages-1))a.current=0;$(a.zzid).css("top",a.current*a.ldImageHeight+"px")};a.hide_Magnifier=function(){$(a.magnifier).css({left:-2E3,top:-2E3})};a.switchmode=function(b){a.mode=b;$(a.controlButtons).css("background-position","0px "+a.controlButtonsHeight*(1-b)+"px")};a.current=0;a.inertiaid=null;
a.inertiaspeed=1;a.inertiaactive=!1;a.magnifier=null;a.zoompreloader=null;a.controlButtons=null;a.ldImageWidth=h.ldImageWidth;a.ldImageHeight=h.ldImageHeight;a.hdImageWidth=h.hdImageWidth;a.hdImageHeight=h.hdImageHeight;a.numberOfImages=h.numberOfImages;a.magnifierSize=h.magnifierSize;a.ldImageBaseName=h.ldImageBaseName;a.isZoomable=h.isZoomable;a.autorotateAfter=1E3*h.autoSpinAfter;a.hdImageBaseName=h.hdImageBaseName;var j={mouseDownX:0,mouseDownY:0,magnifier_MouseMove:function(b){var c=$("#scancube_jzspin").offset(),
d=b.pageX-c.left,b=b.pageY-c.top,c=-(d/a.ldImageWidth*a.hdImageWidth)+a.magnifierSize/2,e=-(b/a.ldImageHeight*a.hdImageHeight)+a.magnifierSize/2,d=d-a.magnifierSize/2,b=b-a.magnifierSize/2;$(a.magnifier).css("left",d+"px");$(a.magnifier).css("top",b+"px");$(a.magnifier).css("background-position",c+"px "+e+"px")},controlButtonClick:function(b){var c=$("#scancube_jzspin").offset();j.mouseDownX=b.pageX-c.left;j.mouseDownY=b.pageY-c.top;if(a.mode==0){a.disableevents();j.zoom_in();a.switchmode(1)}else{a.hide_Magnifier();
a.switchmode(0)}},zoom_in:function(){$(a.zoompreloader).css({left:0,top:0});var b=new Image;b.onload=j.zoomimageloaded;var c=a.hdImageBaseName+a.tofourdigits(-a.current)+".jpg";b.src=c;if(b.complete)b.onload()},zoomimageloaded:function(){$(a.zoompreloader).css({left:-2E3,top:-2E3});j.show_Magnifier()},show_Magnifier:function(){var b=a.hdImageBaseName+a.tofourdigits(-a.current)+".jpg";(new Image).src=b;$(a.magnifier).css("background-image",'url("'+b+'")');var b=-(j.mouseDownX*(a.hdImageWidth/a.ldImageWidth))+
a.magnifierSize/2,c=-(j.mouseDownY*(a.hdImageHeight/a.ldImageHeight))+a.magnifierSize/2;$(a.magnifier).css("background-position",b+"px "+c+"px");$(a.magnifier).addClass("scancube-magnifier-style1");$(a.magnifier).css("left",j.mouseDownX-a.magnifierSize/2+"px");$(a.magnifier).css("top",j.mouseDownY-a.magnifierSize/2+"px")},mouseMove_After_Mouse_Down_Handler:function(b){a.disableevents();var c=$("#scancube_jzspin").offset(),b=b.pageX-c.left;if(a.mode==0){var c=b-j.mouseDownX,c=-c,d=c/a.ldImageWidth;
if(Math.abs(c)<3)return false;if(Math.abs(c)>10){j.mouseDownX=b;a.startinertia(c);return false}d=Math.round(d*a.numberOfImages);c<0&&(d=-1);c>0&&(d=1);if(d!=0){a.current=a.current+d;if(a.current<=-a.numberOfImages)a.current=a.current+a.numberOfImages;if(a.current>0)a.current=a.current-a.numberOfImages;$(a.zzid).css("top",a.current*a.ldImageHeight+"px");j.mouseDownX=b}}return false}},o={mouseDownX:0,mouseDownY:0,show_Magnifier:function(){var b=a.hdImageBaseName+a.tofourdigits(-a.current)+".jpg";(new Image).src=
b;$(a.magnifier).css("left","0px");$(a.magnifier).css("top","0px");$(a.magnifier).addClass("scancube-magnifier-style2");$(a.magnifier).css("width",a.ldImageWidth+"px");$(a.magnifier).css("height",a.ldImageHeight+"px");$(a.magnifier).css("boder","0px solid gray");$(a.magnifier).css("background-image",'url("'+b+'")');var b=-(o.mouseDownX*(a.hdImageWidth/a.ldImageWidth))+a.magnifierSize/2,c=-(o.mouseDownY*(a.hdImageHeight/a.ldImageHeight))+a.magnifierSize/2;b>0&&(b=0);c>0&&(c=0);b<-a.hdImageWidth+a.ldImageWidth&&
(b=-a.hdImageWidth+a.ldImageWidth);c<-a.hdImageHeight+a.ldImageHeight&&(c=-a.hdImageHeight+a.ldImageHeight);$(a.magnifier).css("background-position",b+"px "+c+"px")},magnifier_MouseMove:function(b){var c=$("#scancube_jzspin").offset(),d=-((b.pageX-c.left)/a.ldImageWidth*a.hdImageWidth)+a.magnifierSize/2,b=-((b.pageY-c.top)/a.ldImageHeight*a.hdImageHeight)+a.magnifierSize/2;d>0&&(d=0);b>0&&(b=0);d<-a.hdImageWidth+a.ldImageWidth&&(d=-a.hdImageWidth+a.ldImageWidth);b<-a.hdImageHeight+a.ldImageHeight&&
(b=-a.hdImageHeight+a.ldImageHeight);$(a.magnifier).css("background-position",d+"px "+b+"px")},controlButtonClick:function(){if(a.mode==0){a.disableevents();o.zoom_in();a.switchmode(1)}else{a.hide_Magnifier();a.switchmode(0)}},zoom_in:function(){$(a.zoompreloader).css({left:0,top:0});var b=new Image;b.onload=o.zoomimageloaded;p=a.hdImageBaseName+a.tofourdigits(-a.current)+".jpg";b.src=p;if(b.complete)b.onload()},zoomimageloaded:function(){$(a.zoompreloader).css({left:-2E3,top:-2E3});o.show_Magnifier()},
mouseMove_After_Mouse_Down_Handler:function(b){a.disableevents();var c=$("#scancube_jzspin").offset(),b=b.pageX-c.left;if(a.mode==0){var c=b-o.mouseDownX,c=-c,d=c/a.ldImageWidth;if(Math.abs(c)<3)return false;if(Math.abs(c)>10){o.mouseDownX=b;a.startinertia(c);return false}d=Math.round(d*a.numberOfImages);c<0&&(d=-1);c>0&&(d=1);if(d!=0){a.current=a.current+d;if(a.current<=-a.numberOfImages)a.current=a.current+a.numberOfImages;if(a.current>0)a.current=a.current-a.numberOfImages;$(a.zzid).css("top",
a.current*a.ldImageHeight+"px");o.mouseDownX=b}}return false}},k={touchDownX:0,touchDownY:0,touchEndHandler:function(){if(a.inertiaactive==false)e.autorotateTimeout=window.setTimeout(function(){e.autorotateInterval=window.setInterval(a.rotatej,a.rotationspeed)},a.autorotateAfter)},touchStartHandler:function(b){a.disableevents();if(b.touches.length==1){var c=$("#scancube_jzspin").offset();b.preventDefault();k.touchDownX=b.touches[0].pageX-c.left;k.touchDownY=b.touches[0].pageY-c.top}},touchStartControlButtons:function(b){offset=
$("#scancube_jzspin").offset();b.preventDefault();var c=b.touches[0].pageX-offset.left,b=b.touches[0].pageY-offset.top;if(a.mode==0){a.disableevents();k.zoom_in(c,b);a.switchmode(1)}else{a.hide_Magnifier();a.switchmode(0)}},clickHandler:function(){},touchMoveHandler:function(b){a.disableevents();if(b.touches.length>1||a.mode==1)return false;var c=$("#scancube_jzspin").offset(),d=b.touches[0].pageX-c.left,b=b.touches[0].pageY-c.top;if(a.mode==0){b=d-k.touchDownX;b=-b;c=b/a.ldImageWidth;if(Math.abs(b)<
3)return false;if(Math.abs(b)>15){k.touchDownX=d;a.startinertia(b);return false}c=Math.floor(c*a.numberOfImages);b<0&&(c=-1);b>0&&(c=1);if(c!=0){a.current=a.current+c;if(a.current<=-a.numberOfImages)a.current=a.current+a.numberOfImages;if(a.current>0)a.current=a.current-a.numberOfImages;$(a.zzid).css("top",a.current*a.ldImageHeight+"px");k.touchDownX=d}}else k.show_Magnifier(d,b);return false},zoomimageloaded:function(){$(a.zoompreloader).css({left:-2E3,top:-2E3});k.show_Magnifier(a.ldImageWidth/
2,a.ldImageHeight/2)},show_Magnifier:function(b,c){var d=a.hdImageBaseName+a.tofourdigits(-a.current)+".jpg";(new Image).src=d;$(a.magnifier).css("background-image",'url("'+d+'")');var d=-(b*(a.hdImageWidth/a.ldImageWidth))+a.magnifierSize/2,e=-(c*(a.hdImageHeight/a.ldImageHeight))+a.magnifierSize/2;$(a.magnifier).css("background-position",d+"px "+e+"px");$(a.magnifier).addClass("scancube-magnifier-style1");$(a.magnifier).css("left",b-a.magnifierSize/2+"px");$(a.magnifier).css("top",c-a.magnifierSize/
2+"px")},zoom_in:function(){$(a.zoompreloader).css({left:0,top:0});var b=new Image;b.onload=k.zoomimageloaded;var c=a.hdImageBaseName+a.tofourdigits(a.numberOfImages+a.current-1)+".jpg";b.src=c;if(b.complete)b.onload()},magnifierTouchStart:function(){},magnifierTouchEnd:function(){},magnifierTouchMove:function(b){b.preventDefault();var c=$("#scancube_jzspin").offset();if(!(b.touches.length>1)){var d=b.pageX-c.left,b=b.pageY-c.top,c=-(d/a.ldImageWidth*a.hdImageWidth)+a.magnifierSize/2,e=-(b/a.ldImageHeight*
a.hdImageHeight)+a.magnifierSize/2,d=d-a.magnifierSize/2,b=b-a.magnifierSize/2;$(a.magnifier).css("left",d+"px");$(a.magnifier).css("top",b+"px");$(a.magnifier).css("background-position",c+"px "+e+"px")}},gesturechange:function(b){b.preventDefault();if(b.scale>1){if(a.mode==0){a.disableevents();k.zoom_in(xx,yy);a.switchmode(1)}}else if(a.mode==1){a.hide_Magnifier();a.switchmode(0)}}},f={touchDownX:0,touchDownY:0,bckPosX:0,bckPosY:0,touchDownX:0,touchDownY:0,touchEndHandler:function(){if(a.inertiaactive==
false)e.autorotateTimeout=window.setTimeout(function(){e.autorotateInterval=window.setInterval(a.rotatej,a.rotationspeed)},a.autorotateAfter)},touchStartHandler:function(b){a.disableevents();if(b.touches.length==1){var c=$("#scancube_jzspin").offset();b.preventDefault();f.touchDownX=b.touches[0].pageX-c.left;f.touchDownY=b.touches[0].pageY-c.top}},touchStartControlButtons:function(b){var c=$("#scancube_jzspin").offset();b.preventDefault();if(!(b.touches.length>1)){var d=b.touches[0].pageX-c.left,
b=b.touches[0].pageY-c.top;if(a.mode==0){a.disableevents();f.zoom_in(d,b);a.switchmode(1)}else{a.hide_Magnifier();a.switchmode(0)}}},clickHandler:function(){},touchMoveHandler:function(b){a.disableevents();if(b.touches.length>1)return false;var c=$("#scancube_jzspin").offset(),d=b.touches[0].pageX-c.left,b=b.touches[0].pageY-c.top;if(a.mode==0){b=d-f.touchDownX;b=-b;c=b/a.ldImageWidth;if(Math.abs(b)<3)return false;if(Math.abs(b)>15){f.touchDownX=d;a.startinertia(b);return false}c=Math.floor(c*a.numberOfImages);
b<0&&(c=-1);b>0&&(c=1);if(c!=0){a.current=a.current+c;if(a.current<=-a.numberOfImages)a.current=a.current+a.numberOfImages;if(a.current>0)a.current=a.current-a.numberOfImages;$(a.zzid).css("top",a.current*a.ldImageHeight+"px");f.touchDownX=d}}else f.show_Magnifier(d,b);return false},zoomimageloaded:function(){$(a.zoompreloader).css({left:-2E3,top:-2E3});f.show_Magnifier(a.ldImageWidth/2,a.ldImageHeight/2)},show_Magnifier:function(b,c){var d=a.hdImageBaseName+a.tofourdigits(-a.current)+".jpg";(new Image).src=
d;$(a.magnifier).css("background-image",'url("'+d+'")');var d=-(b*(a.hdImageWidth/a.ldImageWidth))+a.magnifierSize/2,e=-(c*(a.hdImageHeight/a.ldImageHeight))+a.magnifierSize/2;$(a.magnifier).css("background-position",d+"px "+e+"px");$(a.magnifier).addClass("scancube-magnifier-style2");$(a.magnifier).css("width",a.ldImageWidth+"px");$(a.magnifier).css("height",a.ldImageHeight+"px");f.bckPosX=d;f.bckPosY=e;$(a.magnifier).css("left","0px");$(a.magnifier).css("top","0px")},zoom_in:function(){$(a.zoompreloader).css({left:0,
top:0});var b=new Image;b.onload=f.zoomimageloaded;var c=a.hdImageBaseName+a.tofourdigits(a.numberOfImages+a.current-1)+".jpg";b.src=c;if(b.complete)b.onload()},magnifierTouchStart:function(a){a.preventDefault();if(!(a.touches.length>1)){f.touchDownX=a.touches[0].pageX;f.touchDownY=a.touches[0].pageY}},magnifierTouchEnd:function(){},magnifierTouchMove:function(b){b.preventDefault();if(!(b.touches.length>1)){$("#scancube_jzspin").offset();var c=b.pageX,b=b.pageY,d=c-f.touchDownX,e=b-f.touchDownY,g=
a.hdImageWidth/a.ldImageWidth,d=d*g+f.bckPosX,e=e*g+f.bckPosY;d>0&&(d=0);e>0&&(e=0);d<-a.hdImageWidth+a.ldImageWidth&&(d=-a.hdImageWidth+a.ldImageWidth);e<-a.hdImageHeight+a.ldImageHeight&&(e=-a.hdImageHeight+a.ldImageHeight);$(a.magnifier).css("background-position",d+"px "+e+"px");f.bckPosX=d;f.bckPosY=e;f.touchDownX=c;f.touchDownY=b}},gesturechange:function(b){b.preventDefault();if(b.scale>1){if(a.mode==0){a.disableevents();f.zoom_in(50,50);a.switchmode(1)}}else if(a.mode==1){a.hide_Magnifier();
a.switchmode(0)}}},t="scancube_inner",g=h.direction;a.rotationspeed=1E3/h.rotationSpeed;var h=h.style,D=[a.zrotate_Clockwise,a.zrotate_Unclockwise],u=[j,o],E=[k,f];h>=u.length&&(h=0);var i=u[h],n=E[h];a.rotatej=D[g];a.disableevents();$("#scancube_jzspin").empty();$("#scancube_jzspin").css({width:a.ldImageWidth,height:a.ldImageHeight,overflow:"hidden",position:"relative"});a.zzid="#"+t;$("#scancube_jzspin").append('<div id="scancube_inner" style="position:absolute;"></div>');$('<div id="scancube_inner" style="position:absolute;"></div>').css({left:0,
top:0});$(this).css("z-index",0);$(a.zzid).addClass("scancube-main-spin-div");a.disableevents();a.zoompreloader=document.createElement("div");$(a.zoompreloader).addClass("scancube-zoom-preloader");$(a.zoompreloader).css("width",a.ldImageWidth+"px");$(a.zoompreloader).css("height",a.ldImageHeight+"px");$(a.zoompreloader).css("background-position",(a.ldImageWidth-16)/2+"px "+(a.ldImageHeight-16)/2+"px");$(a.zoompreloader).css({left:-2E3,top:-2E3});$("#scancube_jzspin").append(a.zoompreloader);var m=
function(){m=document.createElement("div");$(m).addClass("scancube-main-preloader");var b=document.createElement("div");$(b).attr("id","preloderScanCube");$(b).addClass("scancube-inner-preloader");$(m).append(b);$(b).css("top","0px");$(b).css("left","0px");$("#scancube_jzspin").append(m);$(m).css("left",(a.ldImageWidth-300)/2+"px");$(m).css("top",(a.ldImageHeight-25)/2+"px");return m}();if(!0==a.isZoomable||1==a.isZoomable)a.controlButtons=document.createElement("div"),$(a.controlButtons).addClass("scancube-control-buttons"),
$("#scancube_jzspin").append(a.controlButtons),$(a.controlButtons).css("z-index",3),$(a.controlButtons).css({top:0,left:0});for(var l=0,r=0,l=0;l<a.numberOfImages;l++){g=new Image;g.onload=function(){r++;var b=l/a.numberOfImages;$("#preloderScanCube").css("width",Math.round(300*b)+"px")};var p=a.tofourdigits(l);g.src=a.ldImageBaseName+p+".jpg";$(g);if(g.complete)g.onload()}var s;q()};
$.fn.clearJzSpin=function(){$(this).empty();var g=scanTimes[this.attr("id")];g&&(window.clearInterval(g.autorotateInterval),window.clearTimeout(g.timeoutInterval),window.clearTimeout(g.inertiaTimeout),window.clearTimeout(g.autorotateTimeout))};